<html>
<head>
<style>
body {
  background-color: #dcb;
}
#res {
  margin-top: 20px;
  margin-left: 10px;
}
</style>
<script>
function getUrlParameter(name) {
  name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]')
  var regex = new RegExp('[\\?&]' + name + '=([^&#]*)')
  var results = regex.exec(location.search)
  return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '))
}
function onLoad() {
  const code = getUrlParameter('code')
  window.opener.postMessage({
    oauth_msg: true,
    code: code
  }, "*")
  setTimeout(() => {
    window.close()
  }, 1500)
}
</script>
</head>
<body onload="onLoad()">
  <p id="res">Verifying authentication...</p>
</body>
</html>
